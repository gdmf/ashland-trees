<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ashland Trees</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="City of Ashland Tree of the Year" />
    <meta name="keywords" content="Ashland, Tree" />
    <meta name="author" content="Grant Miller-Francisco" />

    <link rel="shortcut icon" href="img/favicon.png">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
    <!--[if lte IE 8]><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/leaflet/0.6.4/leaflet.ie.css" /><![endif]-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <style type="text/css">
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        position: absolute;
        overflow:hidden;
      }
      input[disabled], select[disabled], textarea[disabled], input[readonly], select[readonly], textarea[readonly] {
        background-color: whiteSmoke;
        border-color: #DDD;
        cursor: default;
      }
      #map {
        margin-top: 40px;
        width:100%;
      }
      .navbar .brand {
        font-weight: bold;
        color: white;
      }
      form {
        margin: 0px;
      }
      .leaflet-popup-content {
        margin-top: 14px;
        margin-bottom: 0px;
        margin-left: 20px;
        margin-right: 20px;
      }
      .leaflet-top .leaflet-control {
        margin-top: 15px;
      }
      .leaflet-control-layers-base input, .leaflet-control-layers-overlays input {
        float: left;
        margin-right: 6px;
        margin-bottom: 1px;
      }

      /* Hack to fix modal display issues in Chrome documented @ https://github.com/twitter/bootstrap/issues/3970 */
      div.modal { overflow: hidden; }

      /* size popup photos */
      .tree-photo {
        width: 200px;
      }

      /* navbar logo */
      .brand img {
        width: 20px
      }

    </style>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="trees.html"><img src="img/tree.png"> Ashland Tree of the Year</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="#" onclick="$('#listModal').modal('show'); return false;"><i class="icon-leaf icon-white"></i> List of Trees</a></li>
              <li><a href="#" onclick="$('#aboutModal').modal('show'); return false;"><i class="icon-question-sign icon-white"></i> About</a></li>

            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="modal hide fade" id="listModal">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>Ashland, Oregon - Tree of the Year</h3>
      </div>
      <div class="modal-body">
          <p>A listing of each Tree of the Year, from 1988 to the present </p>

          <table class="table table-striped table-bordered table-condensed table-hover">
            <thead>
              <tr>
              <th>Year</th>
              <th>Type</th>
              <th>Location</th>
              </tr>
            </thead>
              <tr><td>1988</td><td>Monterey Cyprus</td><td>N Main & Laurel</td></tr>
              <tr><td>1989</td><td>Tree of Heaven</td><td>Plaza</td></tr>
              <tr><td>1990</td><td>Monkey Puzzle</td><td>1 Hillcrest Street</td></tr>
              <tr><td>1991</td><td>Interior Live Oak</td><td>503 Beach</td></tr>
              <tr><td>1992</td><td>California Black Oak</td><td>133 Nutley Street</td></tr>
              <tr><td>1993</td><td>Walnut</td><td>Glenwood Park</td></tr>
              <tr><td>1994</td><td>Sequoia</td><td>SOU Library</td></tr>
              <tr><td>1995</td><td>Black Oak</td><td>128 S. Laurel</td></tr>
              <tr><td>1996</td><td>Blue Spruce</td><td>563 N Main</td></tr>
              <tr><td>1997</td><td>American Elm</td><td>695 6th</td></tr>
              <tr><td>1998</td><td>Coast Redwood</td><td>801 Ashland Street</td></tr>
              <tr><td>1999</td><td>Osage Orange</td><td>101 Orange</td></tr>
              <tr><td>2000</td><td>Gingko tree</td><td>Ashland Library</td></tr>
              <tr><td>2001</td><td>Atlas Blue Cedar</td><td>391 Liberty</td></tr>
              <tr><td>2002</td><td>Deodora Cedar</td><td>Safeway</td></tr>
              <tr><td>2003</td><td>Pecan (Carya Illinoensis)</td><td>762 B Street</td></tr>
              <tr><td>2004</td><td>Monterey Cyprus</td><td>407 Scenic</td></tr>
              <tr><td>2005</td><td>Giant Sequoia</td><td>167 Almond</td></tr>
              <tr><td>2006</td><td>Pacific Madrone</td><td>Mountain View Cemetary</td></tr>
              <tr><td>2007</td><td>Silver Maple</td><td>122 Helman Street</td></tr>
              <tr><td>2008</td><td>Spanish Fir</td><td>128 Wimer Street</td></tr>
              <tr><td>2009</td><td>Pink Dogwood</td><td>634 Iowa Street</td></tr>
              <tr><td>2010</td><td>Podless Catalpa</td><td>200 Sherman Street</td></tr>
              <tr><td>2011</td><td>Coast Redwood</td><td>65 Granite Street</td></tr>
              <tr><td>2012</td><td>Oregon White Oak</td><td>1209 Iowa Street</td></tr>
          </table>

      </div>
    </div>

    <div class="modal hide fade" id="aboutModal">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>About</h3>
      </div>
      <div class="modal-body">

        <p>"Each year, in celebration of National Arbor Week, Ashland residents nominate and elect a tree to be named Tree of the Year." (From the City of Ashland <a href="http://www.ashland.or.us/Page.asp?NavID=11718">website</a>)</p>
        <p>Ashland is a part of <a href="http://www.arborday.org/programs/treeCityUSA/index.cfm">Tree City USA</a>.</p>
        <br/>
        <h4>Credits</h4>
        <p>Photos: Terry Skibby</p>
        <p>Locations: <a href="http://www.ashland.or.us/index.asp">City of Ashland</a></p>
        <p>Design and coding: Grant Miller-Francisco</p>
        <p>Built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a> and <a href="http://leafletjs.com/">Leaflet</a></p>

      </div>
    </div>
    <div id="map"></div>
    <script type="text/javascript">
    var map;

    $(function() {

      // get #map margin-top
      var mapmargin = parseInt($("#map").css("margin-top"), 10);
      $('#map').css("height", ($(window).height() - mapmargin));
      $(window).on("resize", function(e){
        $('#map').css("height", ($(window).height() - mapmargin));
      });

      // Basemap Layers
      var mapquest = new L.TileLayer("http://{s}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png", {
        maxZoom: 18,
        subdomains: ["otile1", "otile2", "otile3", "otile4"],
        attribution: 'Tiles Courtesy of <a href="http://www.mapquest.com/" target="_blank">MapQuest</a> <img src="http://developer.mapquest.com/content/osm/mq_logo.png">'
      });

      map = new L.Map("map",{
        zoom: 14,
        center: new L.LatLng(42.187320, -122.695570),
        layers: [mapquest]
      });
      map.attributionControl.setPrefix('Borrowed heavily from <a href="http://bryanmcbride.com" target="_blank">bryanmcbride.com</a>');

      var treeIcon = L.icon({
        iconUrl: 'img/tree.png',
        iconSize: [36, 42],
        iconAnchor: [16, 38],
        popupAnchor: [4, -25],
        labelAnchor: [6, -12]
      });
      treePoints = new L.geoJson(null, {
        pointToLayer: function (feature, latlng) {
          return L.marker(latlng, {
            icon: treeIcon
          });
        },
        onEachFeature: function (feature, layer) {
          if (feature.properties) {
            var content = '<table class="table table-striped table-bordered table-condensed">' +
                '<tr>' + '<th>Year</th>' + '<td>' + feature.properties.YEAR + '</td>' + '</tr>' +
                '<tr>' + '<th>Type</th>' + '<td>' + feature.properties.Type + '</td>' + '</tr>' +
                '<tr>' + '<th>Location</th>' + '<td>' + feature.properties.Location + '</td>' + '</tr>' +
                '<tr>' + '<th colspan=2>' + '<img class="tree-photo" src="img/trees/' + feature.properties.Photo_new + '.jpg" alt="">' + '</th>' + '</tr>' +
                '<table>';

            layer.bindPopup(content, {minWidth: 210, autoPanPadding: new L.Point(150, 150)});
          }
        }
      });

      $.getJSON("data/trees-of-ashland.geojson", function (data) {
          treePoints.addData(data).addTo(map);
      });

    });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>
<!--     // <script type="text/javascript" src="lib/leaflet/plugins/Permalink.js"></script> -->
<!--     // <script type="text/javascript" src="lib/leaflet/plugins/leaflet.label.js"></script> -->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/bootstrap.min.js"></script>
  </body>
</html>